Geografia_Screen As screen:
    BackgroundImage: =FondoAzulClasico
    ImagePosition: =ImagePosition.Stretch

    gs_img_logo As image:
        Image: =logo5
        PaddingBottom: =3
        PaddingLeft: =3
        PaddingRight: =3
        PaddingTop: =3
        Width: =200
        X: =6
        ZIndex: =3

    gs_lbl_titulo As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Lato
        FontWeight: =FontWeight.Bold
        Height: =60
        Size: =26
        Text: ="Jerarquía Geográfica"
        Width: =1366
        ZIndex: =4

    gs_cnt_filter As groupContainer.manualLayoutContainer:
        Height: =70
        Width: =1366
        Y: =100
        ZIndex: =5

        gs_dpd_buscarPais As dropdown:
            AllowEmptySelection: =true
            ChevronBackground: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            Items: =Filter(Pais,Estatus = true)
            OnChange: =Reset(gs_dpd_buscarRegion);
            Reset: =true
            Width: =220
            X: =226
            Y: =15
            ZIndex: =1

        gs_btn_searchPais As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =14
            Text: ="País"
            X: =60
            Y: =15
            ZIndex: =2

        gs_dpd_buscarRegion As dropdown:
            AllowEmptySelection: =true
            ChevronBackground: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            Items: =Filter(Region,Estatus = true)
            OnChange: |-
                =//__ Cambiamos vsb del componente Loading
                UpdateContext({vsbLoadingJG:true});
                //__ Cambiamos vsb del componente Loading
                UpdateContext({vsbLoadingJG:false});
            OnSelect: =//Set(contEjecucion,1);
            Reset: =true
            Width: =220
            X: =661
            Y: =15
            ZIndex: =3

        gs_btn_buscarRegion As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =14
            Text: ="Región"
            X: =495
            Y: =15
            ZIndex: =4

        gs_dpd_buscarEmbotellador As dropdown:
            AllowEmptySelection: =true
            ChevronBackground: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            Items: =Filter(Embotelladores,Estatus = true)
            Reset: =true
            Visible: =false
            Width: =239
            X: =1091
            Y: =6
            ZIndex: =5

        gs_btn_buscarEmbotellador As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =14
            Text: ="Embotellador"
            Visible: =false
            X: =925
            Y: =6
            ZIndex: =6

        gs_img_nuevo As image:
            Height: =40
            Image: =add
            Width: =63
            X: =1144
            Y: =15
            ZIndex: =7

        gs_btn_nuevo As button:
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(0, 0, 0, 0)
            DisabledFill: =RGBA(0, 0, 0, 0)
            Fill: =Color.Transparent
            HoverFill: =Color.Transparent
            OnSelect: |-
                =//__ Activamos componente loading
                UpdateContext({vsbLoadingJerarquia:true});
                //__ Creamos colecciones para los catalogos
                ClearCollect(colRazonSoc_Jer,Filter(RazonSocial,Estatus = true));
                ClearCollect(colEmbotellador_Jer,Filter(Embotelladores,Estatus = true));
                ClearCollect(colPais_Jer,Filter(Pais,Estatus = true));
                ClearCollect(colRegion_Jer,Filter(Region,Estatus = true));
                ClearCollect(colSubregion_Jer,Filter(Subregion,Estatus = true));
                
                UpdateContext({vsbNewJerarquia:true});
                //__ Desactivamos componente loading
                UpdateContext({vsbLoadingJerarquia:false});
            PressedFill: =Color.Transparent
            Text: =""
            Width: =63
            X: =1144
            Y: =15
            ZIndex: =8

        gs_img_catalogos As image:
            Height: =40
            Image: =books
            ImagePosition: =ImagePosition.Stretch
            Width: =63
            X: =1229
            Y: =15
            ZIndex: =9

        gs_btn_catalogos As button:
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(0, 0, 0, 0)
            DisabledFill: =RGBA(0, 0, 0, 0)
            Fill: =Color.Transparent
            HoverFill: =Color.Transparent
            OnSelect: |-
                =UpdateContext({vsbPopupSeleccionarCat:true})
            PressedFill: =Color.Transparent
            Text: =""
            Width: =63
            X: =1229
            Y: =15
            ZIndex: =10

    gs_cnt_headerBtn As groupContainer.manualLayoutContainer:
        Height: =50
        Width: =1366
        Y: =220
        ZIndex: =6

        gs_btn_id As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Height: =50
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Text: ="ID"
            Width: =64
            X: =53
            ZIndex: =1

        gs_btn_headerRazonS As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            Height: =50
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =14
            Text: ="Razón Social"
            Width: =418
            X: =gs_btn_id.X + gs_btn_id.Width
            ZIndex: =2

        gs_btn_headerEmbotellador As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            Height: =50
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =14
            Text: ="Embotellador"
            X: =gs_btn_headerRazonS.X + gs_btn_headerRazonS.Width
            ZIndex: =3

        gs_btn_headerPais As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            Height: =50
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =14
            Text: ="País"
            X: =gs_btn_headerEmbotellador.X + gs_btn_headerEmbotellador.Width
            ZIndex: =4

        gs_btn_headerRegion As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            Height: =50
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =14
            Text: ="Región"
            X: =gs_btn_headerPais.X + gs_btn_headerPais.Width
            ZIndex: =5

        gs_btn_headerSubregion As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            Height: =50
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =14
            Text: ="Subregión"
            X: =gs_btn_headerRegion.X + gs_btn_headerRegion.Width
            ZIndex: =6

        gs_btn_headerEstatus As button:
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(9, 33, 98, 1)
            Font: =Font.Lato
            Height: =50
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Size: =14
            Text: ="Estatus"
            Width: =116
            X: =gs_btn_headerSubregion.X + gs_btn_headerSubregion.Width
            ZIndex: =7

    gs_cnt_dataGeografia As groupContainer.manualLayoutContainer:
        Height: =425
        Width: =1366
        Y: =270
        ZIndex: =7

        gs_gal_dataJerarquiaGeo As gallery.galleryVertical:
            Height: =415
            Items: |-
                =SortByColumns(
                    Filter(
                        JerarquiaGeografica,
                        StartsWith(
                            Subregion,
                            ""
                        ) 
                        && (Pais = gs_dpd_buscarPais.Selected.NombrePais || gs_dpd_buscarPais.Selected.NombrePais = Blank())
                        && (Region = gs_dpd_buscarRegion.Selected.NombreRegion || gs_dpd_buscarRegion.Selected.NombreRegion = Blank())
                    ),
                    "IdJerarquiaGeografica",
                    SortOrder.Ascending
                )
            Layout: =Layout.Vertical
            TemplateSize: =41
            Width: =1366
            Y: =10
            ZIndex: =1

            gs_txt_id As text:
                Default: =ThisItem.IdJerarquiaGeografica
                DisplayMode: =DisplayMode.View
                OnSelect: =Select(Parent)
                Width: =gs_btn_id.Width
                X: =gs_btn_id.X
                ZIndex: =1

            gs_txt_razonSocial As text:
                Default: =ThisItem.RazonSocial
                DisabledBorderColor: =RGBA(0, 18, 107, 1)
                DisabledColor: =RGBA(0, 0, 0, 1)
                DisabledFill: =RGBA(255, 255, 255, 1)
                DisplayMode: =DisplayMode.Disabled
                Font: =Font.Lato
                OnSelect: =Select(Parent)
                Size: =12
                Width: =gs_btn_headerRazonS.Width
                X: =gs_btn_headerRazonS.X
                ZIndex: =2

            gs_txt_embotellador As text:
                Default: =ThisItem.Embotellador
                DisabledBorderColor: =RGBA(0, 18, 107, 1)
                DisabledColor: =RGBA(0, 0, 0, 1)
                DisabledFill: =RGBA(255, 255, 255, 1)
                DisplayMode: =DisplayMode.Disabled
                Font: =Font.Lato
                OnSelect: =Select(Parent)
                Size: =12
                Width: =gs_btn_headerEmbotellador.Width
                X: =gs_btn_headerEmbotellador.X
                ZIndex: =3

            gs_txt_pais As text:
                Default: =ThisItem.Pais
                DisabledBorderColor: =RGBA(0, 18, 107, 1)
                DisabledColor: =RGBA(0, 0, 0, 1)
                DisabledFill: =RGBA(255, 255, 255, 1)
                DisplayMode: =DisplayMode.Disabled
                Font: =Font.Lato
                Size: =12
                Width: =gs_btn_headerPais.Width
                X: =gs_btn_headerPais.X
                ZIndex: =4

            gs_txt_region As text:
                Default: =ThisItem.Region
                DisabledBorderColor: =RGBA(0, 18, 107, 1)
                DisabledColor: =RGBA(0, 0, 0, 1)
                DisabledFill: =RGBA(255, 255, 255, 1)
                DisplayMode: =DisplayMode.Disabled
                Font: =Font.Lato
                Size: =12
                Width: =gs_btn_headerRegion.Width
                X: =gs_btn_headerRegion.X
                ZIndex: =5

            gs_txt_subregion As text:
                Default: =ThisItem.Subregion
                DisabledBorderColor: =RGBA(0, 18, 107, 1)
                DisabledColor: =RGBA(0, 0, 0, 1)
                DisabledFill: =RGBA(255, 255, 255, 1)
                DisplayMode: =DisplayMode.Disabled
                Font: =Font.Lato
                Size: =12
                Width: =gs_btn_headerSubregion.Width
                X: =gs_btn_headerSubregion.X
                ZIndex: =6

            gs_icn_estatus As circle:
                Fill: =If(ThisItem.Estatus = false,RGBA(255, 0, 0, 1),RGBA(54, 176, 75, 1))
                Height: =30
                OnSelect: =Select(Parent)
                Width: =40
                X: =1213
                Y: =5
                ZIndex: =8

            gs_img_edit As image:
                Height: =35
                Image: =edit
                OnSelect: =Select(Parent)
                PaddingBottom: =3
                PaddingLeft: =3
                PaddingRight: =3
                PaddingTop: =3
                Width: =41
                X: =1291
                Y: =3
                ZIndex: =9

            gs_btn_edit As button:
                DisabledBorderColor: =RGBA(0, 0, 0, 0)
                DisabledColor: =RGBA(0, 0, 0, 0)
                DisabledFill: =RGBA(0, 0, 0, 0)
                Fill: =Color.Transparent
                Height: =35
                HoverFill: =Color.Transparent
                OnSelect: |-
                    =//__ Activamos componente loading
                    UpdateContext({vsbLoadingJerarquia:true});
                    
                    Select(Parent);
                    Set(varTempID,ThisItem.ID);
                    Set(varTempIDJerarqui,ThisItem.IdJerarquiaGeografica);
                    Set(varTempRazonSoc,ThisItem.RazonSocial);
                    Set(varTempEmbotellador,ThisItem.Embotellador);
                    Set(varTempPais,ThisItem.Pais);
                    Set(varTempRegion,ThisItem.Region);
                    Set(varTempSubregion,ThisItem.Subregion);
                    Set(varTempEstatusJ,ThisItem.Estatus);
                    
                    //__ Creamos colecciones para los catalogos
                    ClearCollect(colRazonSoc_Jer,Filter(RazonSocial,Estatus = true));
                    ClearCollect(colEmbotellador_Jer,Filter(Embotelladores,Estatus = true));
                    ClearCollect(colPais_Jer,Filter(Pais,Estatus = true));
                    ClearCollect(colRegion_Jer,Filter(Region,Estatus = true));
                    ClearCollect(colSubregion_Jer,Filter(Subregion,Estatus = true));
                    
                    UpdateContext({vsbPopupEditJerar:true});
                    //__ Desactivamos componente loading
                    UpdateContext({vsbLoadingJerarquia:false});
                PressedFill: =Color.Transparent
                Text: =""
                Width: =41
                X: =1291
                Y: =3
                ZIndex: =10

    gs_cnt_btnsCatalogos As groupContainer.manualLayoutContainer:
        Height: =50
        Width: =1366
        Y: =718
        ZIndex: =8

        gs_btn_embotelladorCat As button:
            Color: =RGBA(0, 0, 0, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Font: =Font.Lato
            HoverFill: =RGBA(9, 33, 98, 1)
            OnSelect: |-
                =Navigate(Embotellador_Screen,ScreenTransition.UnCover);
                Refresh(Embotelladores);
            PressedColor: =RGBA(9, 33, 98, 1)
            PressedFill: =Color.White
            Size: =13
            Text: ="Embotellador"
            Visible: =false
            X: =280
            ZIndex: =1

        gs_btn_paisCat As button:
            Color: =RGBA(0, 0, 0, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Font: =Font.Lato
            HoverFill: =RGBA(9, 33, 98, 1)
            OnSelect: |-
                =Refresh(Pais);
                Navigate(Pais_Screen,ScreenTransition.UnCover)
            PressedColor: =RGBA(9, 33, 98, 1)
            PressedFill: =Color.White
            Size: =13
            Text: ="Pais"
            Visible: =false
            X: =440
            ZIndex: =2

        gs_btn_razonSocialCat As button:
            Color: =RGBA(0, 0, 0, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Font: =Font.Lato
            HoverFill: =RGBA(9, 33, 98, 1)
            OnSelect: |-
                =Navigate(RazonSocial_Screen,ScreenTransition.UnCover);
                Refresh(RazonSocial);
            PressedColor: =RGBA(9, 33, 98, 1)
            PressedFill: =Color.White
            Size: =13
            Text: ="Razon Social"
            Visible: =false
            X: =600
            ZIndex: =3

        gs_btn_regionCat As button:
            Color: =RGBA(0, 0, 0, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Font: =Font.Lato
            HoverFill: =RGBA(9, 33, 98, 1)
            OnSelect: |-
                =Refresh(Region);
                Navigate(Region_Screen,ScreenTransition.UnCover);
            PressedColor: =RGBA(9, 33, 98, 1)
            PressedFill: =Color.White
            Size: =13
            Text: ="Region"
            Visible: =false
            X: =760
            ZIndex: =4

        gs_btn_subregionCat As button:
            Color: =RGBA(0, 0, 0, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Font: =Font.Lato
            HoverFill: =RGBA(9, 33, 98, 1)
            OnSelect: |-
                =Navigate(Subregion_Screen,ScreenTransition.UnCover);
                Refresh(Subregion);
            PressedColor: =RGBA(9, 33, 98, 1)
            PressedFill: =Color.White
            Size: =13
            Text: ="Subregión"
            Visible: =false
            X: =920
            ZIndex: =5

        gs_img_backP As image:
            Height: =47
            Image: =back
            PaddingBottom: =3
            PaddingTop: =3
            Width: =58
            X: =40
            Y: =3
            ZIndex: =6

        gs_btn_backP As button:
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(0, 0, 0, 0)
            DisabledFill: =RGBA(0, 0, 0, 0)
            Fill: =Color.Transparent
            Height: =47
            HoverFill: =Color.Transparent
            OnSelect: |-
                =Navigate(CatalogosMaestros_Screen,ScreenTransition.UnCover);
                Reset(gs_dpd_buscarPais);
                Reset(gs_dpd_buscarRegion);
            PressedFill: =Color.Transparent
            Text: =""
            Width: =58
            X: =40
            Y: =3
            ZIndex: =7

    gs_grp_NewJerarquia As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =29

        rs_fig_fondo_1 As rectangle:
            Fill: =RGBA(0, 18, 107, 0.5)
            Height: =768
            Visible: =vsbNewJerarquia
            Width: =1366
            ZIndex: =9

        rs_fig_subfondo_1 As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =355
            Visible: =vsbNewJerarquia
            Width: =628
            X: =369
            Y: =206
            ZIndex: =10

        rs_lbl_tituloNuevoRegion_1 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            FontWeight: =FontWeight.Semibold
            Text: ="Nueva Jerarquía Geográfica"
            Visible: =vsbNewJerarquia
            Width: =628
            X: =369
            Y: =206
            ZIndex: =11

        rs_lbl_nuevoNombreReg_1 As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="Razón Social"
            Visible: =vsbNewJerarquia
            X: =379
            Y: =256
            ZIndex: =12

        ComboBox1 As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DisplayFields: =["NombreRazonSocial"]
            Items: =Sort(colRazonSoc_Jer,NombreRazonSocial)
            SearchFields: =["NombreRazonSocial"]
            SearchItems: =Search(Sort(colRazonSoc_Jer,NombreRazonSocial),ComboBox1.SearchText,"NombreRazonSocial")
            SelectMultiple: =false
            Visible: =vsbNewJerarquia
            Width: =450
            X: =539
            Y: =256
            ZIndex: =13

        rs_icn_cancelar_1 As icon.CancelBadge:
            Color: =RGBA(255, 0, 0, 1)
            Height: =28
            Icon: =Icon.CancelBadge
            OnSelect: |-
                =UpdateContext({vsbNewJerarquia:false});
                Set(responseNuevoJerarquia,Blank());
            Visible: =vsbNewJerarquia
            Width: =34
            X: =958
            Y: =212
            ZIndex: =14

        rs_icn_agregar_1 As icon.CancelBadge:
            Color: =RGBA(54, 176, 75, 1)
            Height: =28
            Icon: =Icon.CheckBadge
            OnSelect: |-
                =//__ Activamos componente loading
                UpdateContext({vsbLoadingJerarquia:true});
                //__ Realizamos Reset
                Set(responseNuevoJerarquia,Blank());
                Clear(colNewJerarquia);
                //__ Validamos que no existan campos vacios
                If(IsBlank(ComboBox1.Selected) || IsEmpty(ComboBox1.Selected) || IsBlank(ComboBox1_1.Selected) || IsEmpty(ComboBox1_1.Selected) || IsBlank(ComboBox1_2.Selected) || IsEmpty(ComboBox1_2.Selected) || IsBlank(ComboBox1_3.Selected) || IsEmpty(ComboBox1_3.Selected) || IsBlank(ComboBox1_4.Selected) || IsEmpty(ComboBox1_4.Selected),
                    Notify("Para continuar, es necesario ingresar los datos correspondientes",NotificationType.Error,5000),
                //__ Guardamos en una colección los datos de la busqueda
                    Collect(
                    colNewJerarquia,
                    {
                        EmailUser: varEmail,
                        GPID: varUserGPID,
                        NombreUser: varUserName,
                        FechaCreacion: Text(DateTimeValue(Text( Now(),DateTimeFormat.ShortDateTime24)), "dd/mm/yyyyy"),
                        HoraCreacion: Text(DateTimeValue(Text( Now(),DateTimeFormat.ShortDateTime24)), "HH:mm"),
                        RazonSocial: ComboBox1.Selected.NombreRazonSocial,
                        Embotellador: ComboBox1_1.Selected.NombreEmbotelladores,
                        Pais: ComboBox1_2.Selected.NombrePais,
                        Region: ComboBox1_3.Selected.NombreRegion,
                        Subregion: ComboBox1_4.Selected.NombreSubregion,
                        TipoCatalogo: "Jerarquia Geografica",
                        MesSolicitud: Text(DateTimeValue(Text( Now(),DateTimeFormat.ShortDateTime24)), "mmmm"),
                        YearSolicitud:Value(Year(Now()))
                    }
                    );
                
                //__ Invocamos el Flujo de Automate
                Set(varJSON,JSON(colNewJerarquia));
                Set(responseNuevoJerarquia,'[CPC]_SaveJerarquiaGeo'.Run(varJSON));
                Set(responseJerarquiaG,responseNuevoJerarquia.response);
                If(responseJerarquiaG = "Ok",
                    UpdateContext({vsbNewJerarquia:false});
                    Reset(ComboBox1);
                    Reset(ComboBox1_1);
                    Reset(ComboBox1_2);
                    Reset(ComboBox1_3);
                    Reset(ComboBox1_4);
                    Refresh(JerarquiaGeografica);
                    UpdateContext({vsbMsjOk:true});
                    Set(responseNuevoJerarquia,Blank());
                    );
                
                );
                
                //__ Activamos componente loading
                UpdateContext({vsbLoadingJerarquia:false});
            Visible: =vsbNewJerarquia
            Width: =34
            X: =374
            Y: =212
            ZIndex: =15

        rs_lbl_nuevoNombreReg_2 As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="Embotellador"
            Visible: =vsbNewJerarquia
            X: =379
            Y: =303
            ZIndex: =16

        ComboBox1_1 As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DisplayFields: =["NombreEmbotelladores"]
            Items: =Sort(colEmbotellador_Jer,NombreEmbotelladores)
            SearchFields: =["NombreEmbotelladores"]
            SearchItems: =Search(Sort(colEmbotellador_Jer,NombreEmbotelladores),ComboBox1_1.SearchText,"NombreEmbotelladores")
            SelectMultiple: =false
            Visible: =vsbNewJerarquia
            Width: =450
            X: =539
            Y: =303
            ZIndex: =17

        rs_lbl_nuevoNombreReg_3 As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="País"
            Visible: =vsbNewJerarquia
            X: =379
            Y: =350
            ZIndex: =18

        ComboBox1_2 As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DisplayFields: =["NombrePais"]
            Items: =Sort(colPais_Jer,NombrePais)
            SearchFields: =["NombrePais"]
            SearchItems: =Search(Sort(colPais_Jer,NombrePais),ComboBox1_2.SearchText,"NombrePais")
            SelectMultiple: =false
            Visible: =vsbNewJerarquia
            Width: =450
            X: =539
            Y: =350
            ZIndex: =19

        rs_lbl_nuevoNombreReg_4 As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="Región"
            Visible: =vsbNewJerarquia
            X: =379
            Y: =397
            ZIndex: =20

        ComboBox1_3 As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DisplayFields: =["NombreRegion"]
            Items: =Sort(colRegion_Jer,NombreRegion)
            SearchFields: =["NombreRegion"]
            SearchItems: =Search(Sort(colRegion_Jer,NombreRegion),ComboBox1_3.SearchText,"NombreRegion")
            SelectMultiple: =false
            Visible: =vsbNewJerarquia
            Width: =450
            X: =539
            Y: =397
            ZIndex: =21

        rs_lbl_nuevoNombreReg_5 As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="Subregión"
            Visible: =vsbNewJerarquia
            X: =379
            Y: =444
            ZIndex: =22

        ComboBox1_4 As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DisplayFields: =["NombreSubregion"]
            Items: =Sort(colSubregion_Jer,NombreSubregion)
            SearchFields: =["NombreSubregion"]
            SearchItems: =Search(Sort(colSubregion_Jer,NombreSubregion),ComboBox1_4.SearchText,"NombreSubregion")
            SelectMultiple: =false
            Visible: =vsbNewJerarquia
            Width: =450
            X: =539
            Y: =444
            ZIndex: =23

        rs_lbl_msjError_1 As label:
            Align: =Align.Center
            Color: =RGBA(184, 0, 0, 1)
            Font: =Font.Lato
            FontWeight: =FontWeight.Semibold
            Height: =62
            Size: =12
            Text: =responseNuevoJerarquia.response
            Visible: =vsbNewJerarquia
            Width: =610
            X: =379
            Y: =494
            ZIndex: =24

    gs_grp_EditJerarquia As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =44

        gs_fig_fondo As rectangle:
            Fill: =RGBA(0, 18, 107, 0.5)
            Height: =768
            Visible: =vsbPopupEditJerar
            Width: =1366
            ZIndex: =25

        gs_fig_subfondo As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =440
            Visible: =vsbPopupEditJerar
            Width: =628
            X: =369
            Y: =121
            ZIndex: =26

        gs_lbl_tituloEditJerarquia As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            FontWeight: =FontWeight.Semibold
            Text: ="Editar Jerarquía Geográfica"
            Visible: =vsbPopupEditJerar
            Width: =628
            X: =369
            Y: =121
            ZIndex: =27

        gs_lbl_editID As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="ID"
            Visible: =vsbPopupEditJerar
            X: =379
            Y: =172
            ZIndex: =28

        gs_lbl_editID_ As label:
            Text: =varTempIDJerarqui
            Visible: =vsbPopupEditJerar
            X: =539
            Y: =175
            ZIndex: =29

        gs_lbl_editNombreRazonS As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="Razón Social"
            Visible: =vsbPopupEditJerar
            X: =379
            Y: =222
            ZIndex: =30

        gs_dpd_editNombreRazonS As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DefaultSelectedItems: =Filter(colRazonSoc_Jer,NombreRazonSocial = varTempRazonSoc)
            DisplayFields: =["NombreRazonSocial"]
            Items: =Sort(colRazonSoc_Jer,NombreRazonSocial)
            SearchFields: =["NombreRazonSocial"]
            SearchItems: =Search(Sort(colRazonSoc_Jer,NombreRazonSocial),gs_dpd_editNombreRazonS.SearchText,"NombreRazonSocial")
            SelectMultiple: =false
            Visible: =vsbPopupEditJerar
            Width: =450
            X: =539
            Y: =222
            ZIndex: =31

        gs_lbl_editEmbotellador As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="Embotellador"
            Visible: =vsbPopupEditJerar
            X: =379
            Y: =269
            ZIndex: =32

        gs_dpd_editEmbotellador As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DefaultSelectedItems: =Filter(colEmbotellador_Jer,NombreEmbotelladores = varTempEmbotellador)
            DisplayFields: =["NombreEmbotelladores"]
            IsSearchable: =false
            Items: =Sort(colEmbotellador_Jer,NombreEmbotelladores)
            SearchFields: =["NombreEmbotelladores"]
            SearchItems: =[]
            SelectMultiple: =false
            Visible: =vsbPopupEditJerar
            Width: =450
            X: =539
            Y: =269
            ZIndex: =33

        gs_lbl_editPais As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="País"
            Visible: =vsbPopupEditJerar
            X: =379
            Y: =316
            ZIndex: =34

        gs_dpd_editPais As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DefaultSelectedItems: =Filter(colPais_Jer,NombrePais = varTempPais)
            DisplayFields: =["NombrePais"]
            Items: =Sort(colPais_Jer,NombrePais)
            SearchFields: =["NombrePais"]
            SearchItems: =Search(Sort(colPais_Jer,NombrePais),gs_dpd_editPais.SearchText,"NombrePais")
            SelectMultiple: =false
            Visible: =vsbPopupEditJerar
            Width: =450
            X: =539
            Y: =316
            ZIndex: =35

        gs_lbl_editRegion As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="Región"
            Visible: =vsbPopupEditJerar
            X: =379
            Y: =363
            ZIndex: =36

        gs_dpd_editRegion As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DefaultSelectedItems: =Filter(colRegion_Jer,NombreRegion = varTempRegion)
            DisplayFields: =["NombreRegion"]
            Items: =Sort(colRegion_Jer,NombreRegion)
            SearchFields: =["NombreRegion"]
            SearchItems: =Search(Sort(colRegion_Jer,NombreRegion),gs_dpd_editRegion.SearchText,"NombreRegion")
            SelectMultiple: =false
            Visible: =vsbPopupEditJerar
            Width: =450
            X: =539
            Y: =363
            ZIndex: =37

        gs_lbl_editSubregion As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="Subregión"
            Visible: =vsbPopupEditJerar
            X: =379
            Y: =410
            ZIndex: =38

        gs_dpd_subregion As combobox:
            ChevronBackground: =RGBA(0, 18, 107, 1)
            DefaultSelectedItems: =Filter(colSubregion_Jer,NombreSubregion = varTempSubregion)
            DisplayFields: =["NombreSubregion"]
            IsSearchable: =false
            Items: =Sort(colSubregion_Jer,NombreSubregion)
            SearchFields: =["NombreSubregion"]
            SearchItems: =[]
            SelectMultiple: =false
            Visible: =vsbPopupEditJerar
            Width: =450
            X: =539
            Y: =410
            ZIndex: =39

        gs_lbl_msjError As label:
            Align: =Align.Center
            Color: =RGBA(184, 0, 0, 1)
            Font: =Font.Lato
            FontWeight: =FontWeight.Semibold
            Height: =46
            Size: =12
            Text: =responseNuevoJerarquia.response
            Visible: =vsbPopupEditJerar
            Width: =610
            X: =379
            Y: =510
            ZIndex: =40

        gs_icn_cancelar As icon.CancelBadge:
            Color: =RGBA(255, 0, 0, 1)
            Height: =28
            Icon: =Icon.CancelBadge
            OnSelect: |-
                =UpdateContext({vsbPopupEditJerar:false});
                Reset(gs_dpd_editNombreRazonS);
                Reset(gs_dpd_editEmbotellador);
                Reset(gs_dpd_editPais);
                Reset(gs_dpd_editRegion);
                Reset(gs_dpd_subregion);
                Set(responseNuevoJerarquia,Blank());
            Visible: =vsbPopupEditJerar
            Width: =34
            X: =958
            Y: =127
            ZIndex: =41

        gs_icn_agregar As icon.CancelBadge:
            Color: =RGBA(54, 176, 75, 1)
            Height: =28
            Icon: =Icon.CheckBadge
            OnSelect: |-
                =//__ Activamos componente loading
                UpdateContext({vsbLoadingJerarquia:true});
                //__ Realizamos Reset
                Set(responseNuevoJerarquia,Blank());
                Clear(colEditJerarquia);
                //__ Validamos que no existan campos vacios
                If(IsBlank(gs_dpd_editNombreRazonS.Selected) || IsEmpty(gs_dpd_editNombreRazonS.Selected) || IsBlank(gs_dpd_editEmbotellador.Selected) || IsEmpty(gs_dpd_editEmbotellador.Selected) || IsBlank(gs_dpd_editPais.Selected) || IsEmpty(gs_dpd_editPais.Selected) || IsBlank(gs_dpd_editRegion.Selected) || IsEmpty(gs_dpd_editRegion.Selected) || IsBlank(gs_dpd_subregion.Selected) || IsEmpty(gs_dpd_subregion.Selected),
                    Notify("Para continuar, es necesario ingresar los datos correspondientes",NotificationType.Error,5000),
                //__ Guardamos en una colección los datos de la busqueda
                    Collect(
                    colEditJerarquia,
                    {
                        EmailUser: varEmail,
                        GPID: varUserGPID,
                        NombreUser: varUserName,
                        FechaCreacion: Text(DateTimeValue(Text( Now(),DateTimeFormat.ShortDateTime24)), "dd/mm/yyyyy"),
                        HoraCreacion: Text(DateTimeValue(Text( Now(),DateTimeFormat.ShortDateTime24)), "HH:mm"),
                        RazonSocial: gs_dpd_editNombreRazonS.Selected.NombreRazonSocial,
                        Embotellador: gs_dpd_editEmbotellador.Selected.NombreEmbotelladores,
                        Pais: gs_dpd_editPais.Selected.NombrePais,
                        Region: gs_dpd_editRegion.Selected.NombreRegion,
                        Subregion: gs_dpd_subregion.Selected.NombreSubregion,
                        Estatus: gs_tgg_editEstatusJerar.Value,
                        //__ data old
                        RazonSocial_old: varTempRazonSoc,
                        Embotellador_old: varTempEmbotellador,
                        Pais_old: varTempPais,
                        Region_old: varTempRegion,
                        Subregion_old: varTempSubregion,
                        Estatus_old: varTempEstatusJ,
                        IDList: varTempID,
                        TipoCatalogo: "Jerarquia Geografica",
                        MesSolicitud: Text(DateTimeValue(Text( Now(),DateTimeFormat.ShortDateTime24)), "mmmm"),
                        YearSolicitud:Value(Year(Now()))
                    }
                    );
                
                //__ Invocamos el Flujo de Automate
                Set(varJSON,JSON(colEditJerarquia));
                Set(responseNuevoJerarquia,'[CPC]_EditJerarquiaGeo'.Run(varJSON));
                Set(responseEditJerarquiaG,responseNuevoJerarquia.response);
                If(responseEditJerarquiaG = "Ok",
                    UpdateContext({vsbPopupEditJerar:false});
                    Reset(gs_dpd_editNombreRazonS);
                    Reset(gs_dpd_editEmbotellador);
                    Reset(gs_dpd_editPais);
                    Reset(gs_dpd_editRegion);
                    Reset(gs_dpd_subregion);
                    Refresh(JerarquiaGeografica);
                    UpdateContext({vsbMsjOk:true});
                    Set(responseNuevoJerarquia,Blank());
                    );
                
                );
                
                //__ Activamos componente loading
                UpdateContext({vsbLoadingJerarquia:false});
            Visible: =vsbPopupEditJerar
            Width: =34
            X: =374
            Y: =127
            ZIndex: =42

        gs_lbl_editEstatus As label:
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            Text: ="Estatus"
            Visible: =vsbPopupEditJerar
            X: =379
            Y: =459
            ZIndex: =43

        gs_tgg_editEstatusJerar As toggleSwitch:
            BorderStyle: =BorderStyle.None
            Default: =varTempEstatusJ
            FalseFill: =RGBA(255, 0, 0, 1)
            Height: =40
            ShowLabel: =false
            TrueFill: =RGBA(54, 176, 75, 1)
            Visible: =vsbPopupEditJerar
            Width: =206
            X: =539
            Y: =459
            ZIndex: =44

    gs_grp_listaCatalogos As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =50

        gs_fig_fondoSeleccionar As rectangle:
            Fill: =RGBA(0, 18, 107, 0.5)
            Height: =768
            Visible: =vsbPopupSeleccionarCat
            Width: =1366
            ZIndex: =45

        gs_fig_subfondoSeleccionar As rectangle:
            BorderThickness: =1
            Fill: =RGBA(255, 255, 255, 1)
            Height: =363
            Visible: =vsbPopupSeleccionarCat
            Width: =628
            X: =369
            Y: =121
            ZIndex: =46

        gs_lbl_tituloSeleccionar As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            FontWeight: =FontWeight.Semibold
            Text: ="Mantenimiento de Catálogos"
            Visible: =vsbPopupSeleccionarCat
            Width: =628
            X: =369
            Y: =121
            ZIndex: =47

        gs_lbx_catalogos As listbox:
            Font: =Font.Lato
            FontWeight: =FontWeight.Semibold
            Height: =213
            Items: =["Embotellador","País","Razón Social","Región","Subregión"]
            OnChange: |-
                =//__ Validamos la seleccion
                Switch( gs_lbx_catalogos.Selected.Value, 
                    "Embotellador", Refresh(Embotelladores);Navigate(Embotellador_Screen,ScreenTransition.UnCover);UpdateContext({vsbPopupSeleccionarCat:false});Reset(gs_lbx_catalogos), 
                    "País", Refresh(Pais);Navigate(Pais_Screen,ScreenTransition.UnCover);UpdateContext({vsbPopupSeleccionarCat:false});Reset(gs_lbx_catalogos),
                    "Razón Social", Refresh(RazonSocial);Navigate(RazonSocial_Screen,ScreenTransition.UnCover);UpdateContext({vsbPopupSeleccionarCat:false});Reset(gs_lbx_catalogos),
                    "Región", Refresh(Region);Navigate(Region_Screen,ScreenTransition.UnCover);UpdateContext({vsbPopupSeleccionarCat:false});Reset(gs_lbx_catalogos),
                    "Subregión", Refresh(Subregion);Navigate(Subregion_Screen,ScreenTransition.UnCover);UpdateContext({vsbPopupSeleccionarCat:false});Reset(gs_lbx_catalogos)
                    )
                    
            SelectMultiple: =false
            Visible: =vsbPopupSeleccionarCat
            X: =519
            Y: =216
            ZIndex: =48

        gs_icn_cancelarSeleccionar As icon.CancelBadge:
            Color: =RGBA(255, 0, 0, 1)
            Height: =28
            Icon: =Icon.CancelBadge
            OnSelect: |-
                =UpdateContext({vsbPopupSeleccionarCat:false});
                Reset(gs_lbx_catalogos);
            Visible: =vsbPopupSeleccionarCat
            Width: =34
            X: =955
            Y: =126
            ZIndex: =49

    gs_cmp_loading As Loading:
        Visible: =vsbLoadingJerarquia
        ZIndex: =55

    gs_grp_msjCorrecto As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =55

        gs_fig_fondoOk As rectangle:
            Fill: =RGBA(0, 18, 107, 0.5)
            Height: =768
            Visible: =vsbMsjOk
            Width: =1366
            ZIndex: =50

        gs_fig_subfondoOk As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =242
            Visible: =vsbMsjOk
            Width: =524
            X: =421
            Y: =175
            ZIndex: =51

        gs_lbl_tituloOk As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 18, 107, 1)
            Font: =Font.Lato
            FontWeight: =FontWeight.Semibold
            Text: =""
            Visible: =vsbMsjOk
            Width: =524
            X: =421
            Y: =175
            ZIndex: =52

        gs_lbl_msjOk As label:
            Align: =Align.Center
            Font: =Font.Lato
            FontWeight: =FontWeight.Semibold
            Height: =62
            Size: =12
            Text: ="Registro Guardado con Exito"
            Visible: =vsbMsjOk
            Width: =514
            X: =426
            Y: =337
            ZIndex: =53

        gs_icn_ok As icon.Information:
            Color: =RGBA(54, 176, 75, 1)
            Icon: =Icon.CheckBadge
            OnSelect: |-
                =UpdateContext({vsbMsjOk:false});
            Visible: =vsbMsjOk
            X: =651
            Y: =243
            ZIndex: =54

